<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Game</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
            font-family: Arial, sans-serif;
        }

        #gameCanvas {
            background-color: #a23;
            border: 2px solid #fff;
        }

        .game-container {
            text-align: center;
        }

        h1 {
            color: #333;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>Snake Game</h1>
        <canvas id="gameCanvas" width="400" height="400"></canvas>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        const boxSize = 20;
        let snake = [{x: 200, y: 200}];
        let direction = {x: 0, y: 0};
        let food = {x: Math.floor(Math.random() * 20) * boxSize, y: Math.floor(Math.random() * 20) * boxSize};
        let score = 0;
        let snakeColor = getRandomColor();
        let bullet = null; // Variable to store bullet position and direction

        function getRandomColor() {
            const letters = '0123456789ABCDEF';
            let color = '#';
            for (let i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }

        function drawBox(x, y, color) {
            ctx.fillStyle = color;
            ctx.fillRect(x, y, boxSize, boxSize);
        }

        function drawRoundedBox(x, y, color) {
            ctx.fillStyle = color;
            ctx.lineJoin = "round";
            ctx.lineWidth = boxSize / 2;
            ctx.strokeStyle = color;
            ctx.strokeRect(x + boxSize / 4, y + boxSize / 4, boxSize / 2, boxSize / 2);
            ctx.fillRect(x + boxSize / 4, y + boxSize / 4, boxSize / 2, boxSize / 2);
        }

        function drawSnake() {
            const head = snake[0];
            ctx.fillStyle = snakeColor;
            ctx.beginPath();

            if (direction.x === 1) {
                ctx.moveTo(head.x, head.y);
                ctx.lineTo(head.x + boxSize, head.y + boxSize / 2);
                ctx.lineTo(head.x, head.y + boxSize);
            } else if (direction.x === -1) {
                ctx.moveTo(head.x + boxSize, head.y);
                ctx.lineTo(head.x, head.y + boxSize / 2);
                ctx.lineTo(head.x + boxSize, head.y + boxSize);
            } else if (direction.y === 1) {
                ctx.moveTo(head.x, head.y);
                ctx.lineTo(head.x + boxSize / 2, head.y + boxSize);
                ctx.lineTo(head.x + boxSize, head.y);
            } else if (direction.y === -1) {
                ctx.moveTo(head.x, head.y + boxSize);
                ctx.lineTo(head.x + boxSize / 2, head.y);
                ctx.lineTo(head.x + boxSize, head.y + boxSize);
            }

            ctx.closePath();
            ctx.fill();

            for (let i = 1; i < snake.length; i++) {
                drawRoundedBox(snake[i].x, snake[i].y, snakeColor);
            }
        }

        function moveSnake() {
            const newHead = {
                x: snake[0].x + direction.x * boxSize,
                y: snake[0].y + direction.y * boxSize
            };

            snake.unshift(newHead);

            if (newHead.x === food.x && newHead.y === food.y) {
                score++;
                food = {x: Math.floor(Math.random() * 20) * boxSize, y: Math.floor(Math.random() * 20) * boxSize};
            } else {
                snake.pop();
            }
        }

        function checkCollision() {
            const head = snake[0];
            if (head.x < 0 || head.x >= canvas.width || head.y < 0 || head.y >= canvas.height) {
                return true;
            }
            for (let i = 1; i < snake.length; i++) {
                if (head.x === snake[i].x && head.y === snake[i].y) {
                    return true;
                }
            }
            return false;
        }

        function drawFood() {
            drawBox(food.x, food.y, '#FFD700');
        }

        function shootBullet() {
            if (!bullet && (direction.x !== 0 || direction.y !== 0)) {
                bullet = {
                    x: snake[0].x + direction.x * boxSize,
                    y: snake[0].y + direction.y * boxSize,
                    direction: { ...direction }
                };
            }
        }

        function moveBullet() {
            if (bullet) {
                bullet.x += bullet.direction.x * boxSize;
                bullet.y += bullet.direction.y * boxSize;

                // Check if bullet hits the food
                if (bullet.x === food.x && bullet.y === food.y) {
                    score++;
                    food = {x: Math.floor(Math.random() * 20) * boxSize, y: Math.floor(Math.random() * 20) * boxSize};
                    bullet = null;
                }

                // Remove bullet if it goes off the canvas
                if (bullet.x < 0 || bullet.x >= canvas.width || bullet.y < 0 || bullet.y >= canvas.height) {
                    bullet = null;
                }
            }
        }

        function drawBullet() {
            if (bullet) {
                drawBox(bullet.x, bullet.y, '#0000FF'); // Blue color for bullet
            }
        }

        function updateGame() {
            if (checkCollision()) {
                alert('Game Over! Your score: ' + score);
                snake = [{x: 200, y: 200}];
                direction = {x: 0, y: 0};
                score = 0;
                bullet = null;
            }

            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawFood();
            moveSnake();
            moveBullet();
            drawSnake();
            drawBullet();
        }

        document.addEventListener('keydown', function(event) {
            if (event.key === 'ArrowUp' && direction.y === 0) {
                direction = {x: 0, y: -1};
            } else if (event.key === 'ArrowDown' && direction.y === 0) {
                direction = {x: 0, y: 1};
            } else if (event.key === 'ArrowLeft' && direction.x === 0) {
                direction = {x: -1, y: 0};
            } else if (event.key === 'ArrowRight' && direction.x === 0) {
                direction = {x: 1, y: 0};
            } else if (event.key === ' ') { // Spacebar to shoot
                shootBullet();
            }
        });

        setInterval(updateGame, 100);
    </script>
</body>
</html>
