<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Game</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
            font-family: Arial, sans-serif;
        }

        #gameCanvas {
            background-color: #a23;
            border: 2px solid #fff;
        }

        .game-container {
            text-align: center;
        }

        h1 {
            color: #333;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>Snake Game</h1>
        <canvas id="gameCanvas" width="400" height="400"></canvas>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        const boxSize = 20; // Size of each block
        let snake = [{x: 200, y: 200}]; // Snake starts in the center
        let direction = {x: 0, y: 0}; // Initial direction
        let food = {x: Math.floor(Math.random() * 20) * boxSize, y: Math.floor(Math.random() * 20) * boxSize}; // Random food position
        let score = 0;
        let snakeColor = getRandomColor(); // Initial color for the snake

        function getRandomColor() {
            const letters = '0123456789ABCDEF';
            let color = '#';
            for (let i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }

        function drawBox(x, y, color) {
            ctx.fillStyle = color;
            ctx.fillRect(x, y, boxSize, boxSize);
        }

        function drawRoundedBox(x, y, color) {
            ctx.fillStyle = color;
            ctx.lineJoin = "round";
            ctx.lineWidth = boxSize / 2;
            ctx.strokeStyle = color;
            ctx.strokeRect(x + boxSize / 4, y + boxSize / 4, boxSize / 2, boxSize / 2);
            ctx.fillRect(x + boxSize / 4, y + boxSize / 4, boxSize / 2, boxSize / 2);
        }

        function drawSnake() {
            // Draw the head as a triangle
            const head = snake[0];
            ctx.fillStyle = snakeColor;
            ctx.beginPath();

            if (direction.x === 1) { // Moving right
                ctx.moveTo(head.x, head.y);
                ctx.lineTo(head.x + boxSize, head.y + boxSize / 2);
                ctx.lineTo(head.x, head.y + boxSize);
            } else if (direction.x === -1) { // Moving left
                ctx.moveTo(head.x + boxSize, head.y);
                ctx.lineTo(head.x, head.y + boxSize / 2);
                ctx.lineTo(head.x + boxSize, head.y + boxSize);
            } else if (direction.y === 1) { // Moving down
                ctx.moveTo(head.x, head.y);
                ctx.lineTo(head.x + boxSize / 2, head.y + boxSize);
                ctx.lineTo(head.x + boxSize, head.y);
            } else if (direction.y === -1) { // Moving up
                ctx.moveTo(head.x, head.y + boxSize);
                ctx.lineTo(head.x + boxSize / 2, head.y);
                ctx.lineTo(head.x + boxSize, head.y + boxSize);
            }

            ctx.closePath();
            ctx.fill();

            // Draw the rest of the snake with rounded rectangles
            for (let i = 1; i < snake.length; i++) {
                drawRoundedBox(snake[i].x, snake[i].y, snakeColor);
            }
        }

        function moveSnake() {
            const newHead = {
                x: snake[0].x + direction.x * boxSize,
                y: snake[0].y + direction.y * boxSize
            };

            snake.unshift(newHead);

            // If the snake eats the food
            if (newHead.x === food.x && newHead.y === food.y) {
                score++;
                food = {x: Math.floor(Math.random() * 20) * boxSize, y: Math.floor(Math.random() * 20) * boxSize}; // Place new food
            } else {
                snake.pop(); // Remove tail if no food is eaten
            }
        }

        function checkCollision() {
            const head = snake[0];

            // Check wall collisions
            if (head.x < 0 || head.x >= canvas.width || head.y < 0 || head.y >= canvas.height) {
                return true;
            }

            // Check self-collision
            for (let i = 1; i < snake.length; i++) {
                if (head.x === snake[i].x && head.y === snake[i].y) {
                    return true;
                }
            }

            return false;
        }

        function drawFood() {
            drawBox(food.x, food.y, '#FFD700'); // Bright yellow color for food
        }

        function updateGame() {
            if (checkCollision()) {
                alert('Game Over! Your score: ' + score);
                snake = [{x: 200, y: 200}]; // Reset the snake
                direction = {x: 0, y: 0}; // Reset direction
                score = 0; // Reset score
            }

            ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear the canvas
            drawFood(); // Draw food
            moveSnake(); // Move snake

            // Generate a new color for the snake each frame update
            snakeColor = getRandomColor();
            drawSnake(); // Draw snake with the new color
        }

        document.addEventListener('keydown', function(event) {
            if (event.key === 'ArrowUp' && direction.y === 0) {
                direction = {x: 0, y: -1};
            } else if (event.key === 'ArrowDown' && direction.y === 0) {
                direction = {x: 0, y: 1};
            } else if (event.key === 'ArrowLeft' && direction.x === 0) {
                direction = {x: -1, y: 0};
            } else if (event.key === 'ArrowRight' && direction.x === 0) {
                direction = {x: 1, y: 0};
            }
        });

        setInterval(updateGame, 100); // Update game every 100 milliseconds
    </script>
</body>
</html>
